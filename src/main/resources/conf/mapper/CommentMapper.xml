<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.huayu.dao.mapper.CommentMapper">
	<resultMap id="BaseResultInfoMap" type="com.huayu.bo.Comment">
	<!-- 
	  WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 30 16:58:18 CST 2015.
    -->

		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="res_id" property="resId" jdbcType="BIGINT" />
		<result column="resName" property="resName" jdbcType="VARCHAR" />
		<result column="commenter_id" property="commenterId" jdbcType="BIGINT" />
		<result column="commenter" property="commenter" jdbcType="VARCHAR" />
		<result column="comment_date" property="commentDate"  />
		<result column="content" property="content"  />

	</resultMap>
	
	<select id="selectList" resultMap="BaseResultInfoMap">
	 	select    
	   	  c.id, res_id, commenter_id, commenter, comment_date, content , r.resName  
	   	from tb_comment c left join
	   		 tb_resources r on c.res_id = r.id
	   	<where>
	     	<if test="id != null">
		 		and id = #{id} 
			</if>
	       	<if test="resId != null">
			 	and res_id = #{resId} 
			</if>
	       		<if test="commenterId != null">
			 	and commenter_id = #{commenterId} 
			</if>
	       		<if test="commenter != null">
			 	and commenter = #{commenter} 
			</if>
	       		<if test="commentDate != null">
			 	and comment_date = #{commentDate} 
			</if>
	       		<if test="content != null">
			 	and content = #{content} 
			</if>
	   	</where>
	   	<if test="orderBy != null">
	    	order by #{orderBy}
	    </if>
	    <if test="beginNum != null and offset != null">
		    limit #{beginNum} , #{offset}
	    </if>
	</select>
	
	
	<select id="selectCount" resultType="java.lang.Long">
	 	select    
	 		count(*)
	   	from tb_comment
	   	<where>
	       <if test="id != null">
		 		and id = #{id} 
			</if>
	       	<if test="resId != null">
			 	and res_id = #{resId} 
			</if>
	       		<if test="commenterId != null">
			 	and commenter_id = #{commenterId} 
			</if>
	       		<if test="commenter != null">
			 	and commenter = #{commenter} 
			</if>
	   	</where>
	</select>
</mapper>