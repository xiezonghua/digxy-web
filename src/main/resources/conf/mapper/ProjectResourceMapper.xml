<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.huayu.dao.mapper.ProjectResourceMapper">
	<resultMap id="BasicResultMap" type="com.huayu.bo.ProjectResource">
	<!-- 
	  WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 11 16:35:13 CST 2015.
    -->

		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="res_desc" property="resDesc" jdbcType="VARCHAR" />
		<result column="doc_name" property="docName" jdbcType="VARCHAR" />
		<result column="doc_floder" property="docFloder" jdbcType="VARCHAR" />
		<result column="star" property="star" jdbcType="TINYINT" />
		<result column="upload_date" property="uploadDate"  />
		<result column="uploader" property="uploader" jdbcType="BIGINT" />
		<result column="project_id" property="projectId" jdbcType="BIGINT" />
		<result column="label" property="label" jdbcType="VARCHAR" />
		<result column="click_times" property="clickTimes" jdbcType="INTEGER" />
		<result column="download_times" property="downloadTimes" jdbcType="INTEGER" />
		<result column="status" property="status" jdbcType="TINYINT" />
		<result column="uploader_name" property="uploaderName" jdbcType="VARCHAR" />
		<result column="project_name" property="projectName" jdbcType="VARCHAR" />
		<result column="portrait" property="portrait" jdbcType="VARCHAR"/>		
	</resultMap>
	
	<sql id="Column_List">
	<!-- 
	  WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 11 16:35:13 CST 2015.
    -->
	pr.id, pr.name, res_desc, pr.doc_name, pr.doc_floder, pr.star, pr.upload_date, pr.uploader, project_id, label,  pr.click_times,  pr.download_times, pr.status 
  </sql>
  
  <sql id="queryCondition">
  	<where>
   		<if test="name != null">
		 	and  pr.name = #{name} 
		</if>
       		<if test="resDesc != null">
		 	and  pr.res_desc = #{resDesc} 
		</if>
       		<if test="docName != null">
		 	and  pr.doc_name = #{docName} 
		</if>
       		<if test="docFloder != null">
		 	and  pr.doc_floder = #{docFloder} 
		</if>
       		<if test="star != null">
		 	and  pr.star = #{star} 
		</if>
       		<if test="uploadDate != null">
		 	and  pr.upload_date = #{uploadDate} 
		</if>
       		<if test="uploader != null">
		 	and  pr.uploader = #{uploader} 
		</if>
       		<if test="projectId != null">
		 	and  pr.project_id = #{projectId} 
		</if>
       		<if test="label != null">
		 	and label = #{label} 
		</if>
			<if test="downloadTimes != null">
		 	and  pr.download_times = #{downloadTimes} 
		</if>
       		<if test="status != null">
		 	and  pr.status = #{status} 
		</if>
		</where>
		<if test="orderBy != null">
	    	order by #{orderBy}
	    </if>
		<if test="beginNum != null and offset != null">
		    limit #{beginNum} , #{offset}
	    </if>
  </sql>
  
  <select id="selectList" resultMap="BasicResultMap">
  	select 
  		<include refid="Column_List"></include>
  		, u.nic uploader_name , u.yhtp portrait
   		, p.name project_name
  	from 
  	 	tb_project_resource pr left join tb_user u on pr.uploader = u.id
  	 	left join tb_project p on pr.project_id = p.id
  	  	<include refid="queryCondition"></include>	
  </select>
  
 <select id="selectListCount" resultType="java.lang.Long">
 	select count(id)
 	from tb_project_resource pr
  	<include refid="queryCondition"></include>	
 </select> 
  
  
	
</mapper>